<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="base (title='QQ')">

<style th:fragment="style">
    .loginCard {
        width: 350px;
        position: absolute;
        left: 50%;
        top: 50%;
        margin: -180px 0 0 -175px;
    }
</style>

<div th:fragment="content">
    <div class="card loginCard">
        <div class="card-header">QQ登录</div>
        <div class="card-body">
            <form id="form">
                <div class="form-group row">
                    <label for="username" class="col-sm-3 col-form-label">用户</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" name="username" id="username"
                               th:value="${username}">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="password" class="col-sm-3 col-form-label">密码</label>
                    <div class="col-sm-9">
                        <input type="password" class="form-control" name="password" id="password"
                               th:value="${password}">
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-12">
                        <button id="loginBtn" type="button" class="btn btn-primary form-control" onclick="login()">
                            授权登陆
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script th:inline="javascript" th:fragment="::script">
        /*<![CDATA[*/
        function login() {
            const fields = $("#form").serializeArray()
            let data = {}
            $.each(fields, function (index, field) {
                data[field.name] = field.value
            })
            data = JSON.stringify(data)
            console.info(data)
            $.ajax({
                type: 'POST',
                url: [[${loginURL}]],
                contentType: 'application/json',
                data: data,
                dataType: 'json',
                success: function (data) {
                    console.info(data)
                }
            })
        }

        /*]]>*/
    </script>
</div>
</body>
</html>